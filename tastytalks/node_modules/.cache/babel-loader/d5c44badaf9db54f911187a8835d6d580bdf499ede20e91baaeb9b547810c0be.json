{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { createStore } from 'vuex';\nimport router from '../router';\nimport { auth } from '../firebase';\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from 'firebase/auth';\nexport default createStore({\n  state: {\n    user: null\n  },\n  mutations: {\n    SET_USER(state, user) {\n      state.user = user;\n    },\n    CLEAR_USER(state) {\n      state.user = null;\n    }\n  },\n  actions: {\n    async login({\n      commit\n    }, details) {\n      const {\n        email,\n        password\n      } = details;\n      try {\n        await signInWithEmailAndPassword(auth, email, password);\n      } catch (error) {\n        switch (error.code) {\n          case 'auth/user-not-found':\n            alert('User not found');\n            break;\n          default:\n            alert('Something went wrong');\n        }\n        return;\n      }\n      commit('SET_USER', auth.currentUser);\n      router.push('/');\n    },\n    async register({\n      commit\n    }, details) {\n      const {\n        email,\n        password\n      } = details;\n      try {\n        await createUserWithEmailAndPassword(auth, email, password);\n      } catch (error) {\n        switch (error.code) {\n          case 'auth/email-already-in-use':\n            alert('Email already in use');\n            break;\n          case 'auth/invalid-email':\n            alert('Invalid email');\n            break;\n          case 'auth/operation-not-allowed':\n            alert('Operation not allowed');\n            break;\n          case 'auth/weak-password':\n            alert('Weak password');\n            break;\n          default:\n            alert('Something went wrong');\n        }\n        return;\n      }\n      commit('SET_USER', auth.currentUser);\n      router.push('/login');\n    },\n    async logout({\n      commit\n    }) {\n      await signOut(auth);\n      commit('CLEAR_USER');\n      router.push('/login');\n    },\n    fetchUser({\n      commit\n    }) {\n      auth.onAuthStateChanged(async user => {\n        if (user === null) {\n          commit('CLEAR_USER');\n        } else {\n          commit('SET_USER', user);\n          if (router.isReady() && router.currentRoute.value.path === '/login') {\n            router.push('/');\n          }\n        }\n      });\n    }\n  },\n  getters: {}\n});","map":{"version":3,"names":["createStore","router","auth","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","state","user","mutations","SET_USER","CLEAR_USER","actions","login","commit","details","email","password","error","code","alert","currentUser","push","register","logout","fetchUser","onAuthStateChanged","isReady","currentRoute","value","path","getters"],"sources":["C:/Users/willa/Documents/GitHub/ITSC-3155/TastyTalks/tastytalks/src/store/index.js"],"sourcesContent":["import { createStore } from 'vuex'\r\nimport router from '../router'\r\nimport { auth } from '../firebase'\r\nimport {\r\n  createUserWithEmailAndPassword,\r\n  signInWithEmailAndPassword,\r\n  signOut, \r\n  \r\n} from 'firebase/auth'\r\n\r\n\r\nexport default createStore({\r\n  state: {\r\n    user: null\r\n  },\r\n  mutations: {\r\n\r\n    SET_USER (state, user){\r\n      state.user = user\r\n    },\r\n\r\n    CLEAR_USER (state){\r\n      state.user = null\r\n    }\r\n  },\r\n  actions: {\r\n    async login({commit}, details){\r\n      const { email, password } = details\r\n\r\n      try{\r\n        await signInWithEmailAndPassword(auth, email, password)\r\n      } catch (error){\r\n        switch(error.code){\r\n          case 'auth/user-not-found': \r\n            alert('User not found')\r\n            break\r\n          default:\r\n            alert ('Something went wrong')\r\n        }\r\n\r\n        return\r\n      }\r\n\r\n      commit('SET_USER', auth.currentUser)\r\n      router.push('/')\r\n\r\n    },\r\n    async register({commit}, details){\r\n      const { email, password } = details\r\n      try{\r\n        await createUserWithEmailAndPassword(auth, email, password)\r\n      } catch (error){\r\n        switch(error.code){\r\n          case 'auth/email-already-in-use': \r\n            alert('Email already in use')\r\n            break\r\n          case 'auth/invalid-email': \r\n            alert('Invalid email')\r\n            break\r\n          case 'auth/operation-not-allowed': \r\n            alert('Operation not allowed')\r\n            break\r\n          case 'auth/weak-password': \r\n            alert('Weak password')\r\n            break\r\n          default:\r\n            alert ('Something went wrong')\r\n        }\r\n\r\n        return\r\n      }\r\n\r\n      commit('SET_USER', auth.currentUser)\r\n      router.push('/login')\r\n    },\r\n    async logout({commit}){\r\n      await signOut(auth)\r\n      commit('CLEAR_USER')\r\n      router.push('/login')\r\n    },\r\n    fetchUser({ commit }){\r\n      auth.onAuthStateChanged(async user => {\r\n        if(user === null){\r\n          commit('CLEAR_USER')\r\n        } else {\r\n          commit('SET_USER', user)\r\n\r\n          if(router.isReady() && router.currentRoute.value.path === '/login'){\r\n            router.push('/')\r\n          }\r\n        }\r\n      })\r\n    }\r\n  },\r\n  getters: {\r\n    \r\n\r\n  }\r\n})"],"mappings":";AAAA,SAASA,WAAW,QAAQ,MAAM;AAClC,OAAOC,MAAM,MAAM,WAAW;AAC9B,SAASC,IAAI,QAAQ,aAAa;AAClC,SACEC,8BAA8B,EAC9BC,0BAA0B,EAC1BC,OAAO,QAEF,eAAe;AAGtB,eAAeL,WAAW,CAAC;EACzBM,KAAK,EAAE;IACLC,IAAI,EAAE;EACR,CAAC;EACDC,SAAS,EAAE;IAETC,QAAQA,CAAEH,KAAK,EAAEC,IAAI,EAAC;MACpBD,KAAK,CAACC,IAAI,GAAGA,IAAI;IACnB,CAAC;IAEDG,UAAUA,CAAEJ,KAAK,EAAC;MAChBA,KAAK,CAACC,IAAI,GAAG,IAAI;IACnB;EACF,CAAC;EACDI,OAAO,EAAE;IACP,MAAMC,KAAKA,CAAC;MAACC;IAAM,CAAC,EAAEC,OAAO,EAAC;MAC5B,MAAM;QAAEC,KAAK;QAAEC;MAAS,CAAC,GAAGF,OAAO;MAEnC,IAAG;QACD,MAAMV,0BAA0B,CAACF,IAAI,EAAEa,KAAK,EAAEC,QAAQ,CAAC;MACzD,CAAC,CAAC,OAAOC,KAAK,EAAC;QACb,QAAOA,KAAK,CAACC,IAAI;UACf,KAAK,qBAAqB;YACxBC,KAAK,CAAC,gBAAgB,CAAC;YACvB;UACF;YACEA,KAAK,CAAE,sBAAsB,CAAC;QAClC;QAEA;MACF;MAEAN,MAAM,CAAC,UAAU,EAAEX,IAAI,CAACkB,WAAW,CAAC;MACpCnB,MAAM,CAACoB,IAAI,CAAC,GAAG,CAAC;IAElB,CAAC;IACD,MAAMC,QAAQA,CAAC;MAACT;IAAM,CAAC,EAAEC,OAAO,EAAC;MAC/B,MAAM;QAAEC,KAAK;QAAEC;MAAS,CAAC,GAAGF,OAAO;MACnC,IAAG;QACD,MAAMX,8BAA8B,CAACD,IAAI,EAAEa,KAAK,EAAEC,QAAQ,CAAC;MAC7D,CAAC,CAAC,OAAOC,KAAK,EAAC;QACb,QAAOA,KAAK,CAACC,IAAI;UACf,KAAK,2BAA2B;YAC9BC,KAAK,CAAC,sBAAsB,CAAC;YAC7B;UACF,KAAK,oBAAoB;YACvBA,KAAK,CAAC,eAAe,CAAC;YACtB;UACF,KAAK,4BAA4B;YAC/BA,KAAK,CAAC,uBAAuB,CAAC;YAC9B;UACF,KAAK,oBAAoB;YACvBA,KAAK,CAAC,eAAe,CAAC;YACtB;UACF;YACEA,KAAK,CAAE,sBAAsB,CAAC;QAClC;QAEA;MACF;MAEAN,MAAM,CAAC,UAAU,EAAEX,IAAI,CAACkB,WAAW,CAAC;MACpCnB,MAAM,CAACoB,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IACD,MAAME,MAAMA,CAAC;MAACV;IAAM,CAAC,EAAC;MACpB,MAAMR,OAAO,CAACH,IAAI,CAAC;MACnBW,MAAM,CAAC,YAAY,CAAC;MACpBZ,MAAM,CAACoB,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IACDG,SAASA,CAAC;MAAEX;IAAO,CAAC,EAAC;MACnBX,IAAI,CAACuB,kBAAkB,CAAC,MAAMlB,IAAI,IAAI;QACpC,IAAGA,IAAI,KAAK,IAAI,EAAC;UACfM,MAAM,CAAC,YAAY,CAAC;QACtB,CAAC,MAAM;UACLA,MAAM,CAAC,UAAU,EAAEN,IAAI,CAAC;UAExB,IAAGN,MAAM,CAACyB,OAAO,CAAC,CAAC,IAAIzB,MAAM,CAAC0B,YAAY,CAACC,KAAK,CAACC,IAAI,KAAK,QAAQ,EAAC;YACjE5B,MAAM,CAACoB,IAAI,CAAC,GAAG,CAAC;UAClB;QACF;MACF,CAAC,CAAC;IACJ;EACF,CAAC;EACDS,OAAO,EAAE,CAGT;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}