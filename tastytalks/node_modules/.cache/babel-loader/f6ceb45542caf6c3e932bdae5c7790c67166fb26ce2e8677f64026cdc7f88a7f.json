{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, normalizeStyle as _normalizeStyle, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-21b241e4\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"divForm\"\n};\nconst _hoisted_2 = {\n  class: \"form-newPost\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"title-CreateNewPost\"\n}, [/*#__PURE__*/_createElementVNode(\"h1\", null, \"Create new Recipe\")], -1 /* HOISTED */));\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"title\"\n}, \"Recipe Name\", -1 /* HOISTED */));\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"category\"\n}, \"Region\", -1 /* HOISTED */));\nconst _hoisted_6 = /*#__PURE__*/_createStaticVNode(\"<option value=\\\"\\\" selected disabled data-v-21b241e4>Select Region</option><option value=\\\"1\\\" data-v-21b241e4>Asia-Pacific</option><option value=\\\"2\\\" data-v-21b241e4>Caribbean</option><option value=\\\"3\\\" data-v-21b241e4>Central America</option><option value=\\\"4\\\" data-v-21b241e4>Central Asia</option><option value=\\\"5\\\" data-v-21b241e4>Eastern Europe</option><option value=\\\"6\\\" data-v-21b241e4>Middle East</option><option value=\\\"7\\\" data-v-21b241e4>Nordic Countries</option><option value=\\\"8\\\" data-v-21b241e4>North America</option><option value=\\\"9\\\" data-v-21b241e4>Northern Africa</option><option value=\\\"10\\\" data-v-21b241e4>Oceania</option><option value=\\\"11\\\" data-v-21b241e4>Southern Africa</option><option value=\\\"12\\\" data-v-21b241e4>South America</option><option value=\\\"13\\\" data-v-21b241e4>Southeast Asia</option><option value=\\\"14\\\" data-v-21b241e4>Western Europe</option>\", 15);\nconst _hoisted_21 = [_hoisted_6];\nconst _hoisted_22 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"tags\"\n}, \"Tags\", -1 /* HOISTED */));\nconst _hoisted_23 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_24 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_25 = {\n  class: \"tag-dropdown\"\n};\nconst _hoisted_26 = {\n  key: 0,\n  class: \"tag-dropdown-content\"\n};\nconst _hoisted_27 = {\n  class: \"tag-dropdown\"\n};\nconst _hoisted_28 = {\n  key: 0,\n  class: \"tag-dropdown-content\"\n};\nconst _hoisted_29 = {\n  class: \"tag-dropdown\"\n};\nconst _hoisted_30 = {\n  key: 0,\n  class: \"tag-dropdown-content\"\n};\nconst _hoisted_31 = {\n  class: \"tag-dropdown\"\n};\nconst _hoisted_32 = {\n  key: 0,\n  class: \"tag-dropdown-content\"\n};\nconst _hoisted_33 = {\n  class: \"tag-container\"\n};\nconst _hoisted_34 = {\n  class: \"tag-list\",\n  id: \"tagList\"\n};\nconst _hoisted_35 = {\n  class: \"tag-item\"\n};\nconst _hoisted_36 = [\"onClick\"];\nconst _hoisted_37 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_38 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"ingredients\"\n}, \"Recipe Ingredients\", -1 /* HOISTED */));\nconst _hoisted_39 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"details\"\n}, \"Recipe Instructions and Description\", -1 /* HOISTED */));\nconst _hoisted_40 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"image\"\n}, \"Recipe Image\", -1 /* HOISTED */));\nconst _hoisted_41 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"input\", {\n  type: \"file\",\n  id: \"imageUpload\",\n  accept: \"image/*\",\n  required: \"\"\n}, null, -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"main\", null, [_createElementVNode(\"div\", _hoisted_1, [_createCommentVNode(\" FORM CONTAINER \"), _createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createCommentVNode(\" FORM \"), _createCommentVNode(\" The form action goes to /posts because the page should be redirected to the post page with all the posts when the person click submit \"), _createElementVNode(\"form\", {\n    onSubmit: _cache[25] || (_cache[25] = (...args) => $setup.addPost && $setup.addPost(...args)),\n    enctype: \"multipart/form-data\",\n    method: \"POST\"\n  }, [_createCommentVNode(\" Receipe Name  \"), _hoisted_4, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    name: \"recipeName\",\n    id: \"recipeName\",\n    placeholder: \"Recipe Name\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.recipe_form.title = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.recipe_form.title]]), _createCommentVNode(\" Receipe Category \"), _hoisted_5, _withDirectives(_createElementVNode(\"select\", {\n    name: \"countryOfOrigin\",\n    id: \"countrySelect\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.recipe_form.region = $event),\n    required: \"\"\n  }, [..._hoisted_21], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.recipe_form.region]]), _createCommentVNode(\" Tags Dropdown \"), _hoisted_22, _hoisted_23, _hoisted_24, _createElementVNode(\"div\", _hoisted_25, [_createElementVNode(\"button\", {\n    class: \"tag-dropdown-btn\",\n    onClick: _cache[2] || (_cache[2] = $event => $setup.toggleDropdown('course'))\n  }, \"Course\"), $setup.showDropdown.course ? (_openBlock(), _createElementBlock(\"div\", _hoisted_26, [_createElementVNode(\"a\", {\n    href: \"#\",\n    onClick: _cache[3] || (_cache[3] = _withModifiers($event => $setup.addTag('Starter'), [\"prevent\"]))\n  }, \"Starter\"), _createElementVNode(\"a\", {\n    href: \"#\",\n    onClick: _cache[4] || (_cache[4] = _withModifiers($event => $setup.addTag('Entrée'), [\"prevent\"]))\n  }, \"Entrée\"), _createElementVNode(\"a\", {\n    href: \"#\",\n    onClick: _cache[5] || (_cache[5] = _withModifiers($event => $setup.addTag('Dessert'), [\"prevent\"]))\n  }, \"Dessert\")])) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_27, [_createElementVNode(\"button\", {\n    class: \"tag-dropdown-btn\",\n    onClick: _cache[6] || (_cache[6] = $event => $setup.toggleDropdown('region'))\n  }, \"Season\"), $setup.showDropdown.region ? (_openBlock(), _createElementBlock(\"div\", _hoisted_28, [_createElementVNode(\"a\", {\n    href: \"#\",\n    onClick: _cache[7] || (_cache[7] = _withModifiers($event => $setup.addTag('Spring'), [\"prevent\"]))\n  }, \"Spring\"), _createElementVNode(\"a\", {\n    href: \"#\",\n    onClick: _cache[8] || (_cache[8] = _withModifiers($event => $setup.addTag('Summer'), [\"prevent\"]))\n  }, \"Summer\"), _createElementVNode(\"a\", {\n    href: \"#\",\n    onClick: _cache[9] || (_cache[9] = _withModifiers($event => $setup.addTag('Fall'), [\"prevent\"]))\n  }, \"Fall\"), _createElementVNode(\"a\", {\n    href: \"#\",\n    onClick: _cache[10] || (_cache[10] = _withModifiers($event => $setup.addTag('Winter'), [\"prevent\"]))\n  }, \"Winter\"), _createCommentVNode(\" Add more predefined tags for region dropdown \")])) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_29, [_createElementVNode(\"button\", {\n    class: \"tag-dropdown-btn\",\n    onClick: _cache[11] || (_cache[11] = $event => $setup.toggleDropdown('specialDiets'))\n  }, \"Special Diets\"), $setup.showDropdown.specialDiets ? (_openBlock(), _createElementBlock(\"div\", _hoisted_30, [_createElementVNode(\"a\", {\n    href: \"#\",\n    onClick: _cache[12] || (_cache[12] = _withModifiers($event => $setup.addTag('Vegetarian'), [\"prevent\"]))\n  }, \"Vegetarian\"), _createElementVNode(\"a\", {\n    href: \"#\",\n    onClick: _cache[13] || (_cache[13] = _withModifiers($event => $setup.addTag('Vegan'), [\"prevent\"]))\n  }, \"Vegan\"), _createElementVNode(\"a\", {\n    href: \"#\",\n    onClick: _cache[14] || (_cache[14] = _withModifiers($event => $setup.addTag('Gluten-Free'), [\"prevent\"]))\n  }, \"Gluten-Free\"), _createCommentVNode(\" Add more predefined tags for special diets dropdown \")])) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_31, [_createElementVNode(\"button\", {\n    class: \"tag-dropdown-btn\",\n    onClick: _cache[15] || (_cache[15] = $event => $setup.toggleDropdown('holiday'))\n  }, \"Holiday\"), $setup.showDropdown.holiday ? (_openBlock(), _createElementBlock(\"div\", _hoisted_32, [_createElementVNode(\"a\", {\n    href: \"#\",\n    onClick: _cache[16] || (_cache[16] = _withModifiers($event => $setup.addTag('Thanksgiving'), [\"prevent\"]))\n  }, \"Thanksgiving\"), _createElementVNode(\"a\", {\n    href: \"#\",\n    onClick: _cache[17] || (_cache[17] = _withModifiers($event => $setup.addTag('Halloween'), [\"prevent\"]))\n  }, \"Halloween\"), _createElementVNode(\"a\", {\n    href: \"#\",\n    onClick: _cache[18] || (_cache[18] = _withModifiers($event => $setup.addTag('Independence Day'), [\"prevent\"]))\n  }, \"Independence Day\"), _createElementVNode(\"a\", {\n    href: \"#\",\n    onClick: _cache[19] || (_cache[19] = _withModifiers($event => $setup.addTag('Easter'), [\"prevent\"]))\n  }, \"Easter\"), _createElementVNode(\"a\", {\n    href: \"#\",\n    onClick: _cache[20] || (_cache[20] = _withModifiers($event => $setup.addTag('Christmas'), [\"prevent\"]))\n  }, \"Christmas\"), _createElementVNode(\"a\", {\n    href: \"#\",\n    onClick: _cache[21] || (_cache[21] = _withModifiers($event => $setup.addTag('Valentine\\'s Day'), [\"prevent\"]))\n  }, \"Valentine's Day\"), _createCommentVNode(\" Add more predefined tags for holiday dropdown \")])) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" Selected Tags \"), _createElementVNode(\"div\", _hoisted_33, [_createElementVNode(\"div\", _hoisted_34, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.tags, (tag, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      class: \"tag\",\n      style: _normalizeStyle({\n        backgroundColor: tag.color\n      })\n    }, [_createElementVNode(\"div\", _hoisted_35, [_createTextVNode(_toDisplayString(tag.name) + \" \", 1 /* TEXT */), _createElementVNode(\"span\", {\n      class: \"tag-delete\",\n      onClick: $event => $setup.deleteTag(index)\n    }, \"×\", 8 /* PROPS */, _hoisted_36)])], 4 /* STYLE */);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createCommentVNode(\" This is for inputing tag with a input bar (Could be usefull in the future) \"), _createCommentVNode(\" <div class=\\\"tag-input\\\">\\r\\n                    <input type=\\\"text\\\" id=\\\"tagInput\\\" placeholder=\\\"Add a tag\\\" v-model=\\\"newTag\\\">\\r\\n                    <button type=\\\"button\\\" @click.prevent=\\\"addTag(newTag)\\\">Add Tag</button>\\r\\n                </div> \"), _hoisted_37, _createCommentVNode(\" Ingredients \"), _hoisted_38, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    name: \"recipeIngredients\",\n    id: \"recipeIngredients\",\n    placeholder: \"Recipe Ingredients\",\n    \"onUpdate:modelValue\": _cache[22] || (_cache[22] = $event => $setup.recipe_form.ingredients = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.recipe_form.ingredients]]), _createCommentVNode(\" Instructions, description and details \"), _hoisted_39, _withDirectives(_createElementVNode(\"textarea\", {\n    id: \"text\",\n    name: \"recipeDescription\",\n    type: \"text\",\n    minlength: \"10\",\n    placeholder: \"Recipe Details...\",\n    \"onUpdate:modelValue\": _cache[23] || (_cache[23] = $event => $setup.recipe_form.instructions = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.recipe_form.instructions]]), _createCommentVNode(\" Image upload \"), _hoisted_40, _hoisted_41, _createCommentVNode(\" <img :src=\\\"picture.value\\\" alt=\\\"preview\\\">      \"), _createCommentVNode(\" Submit recipe \"), _createElementVNode(\"input\", {\n    type: \"submit\",\n    onClick: _cache[24] || (_cache[24] = (...args) => $setup.addPost && $setup.addPost(...args)),\n    value: \"Submit\"\n  })], 32 /* HYDRATE_EVENTS */)])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","for","_hoisted_6","id","type","accept","required","_createElementBlock","_hoisted_1","_createCommentVNode","_hoisted_2","_hoisted_3","onSubmit","_cache","args","$setup","addPost","enctype","method","_hoisted_4","name","placeholder","recipe_form","title","$event","_hoisted_5","region","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","onClick","toggleDropdown","showDropdown","course","_hoisted_26","href","_withModifiers","addTag","_hoisted_27","_hoisted_28","_hoisted_29","specialDiets","_hoisted_30","_hoisted_31","holiday","_hoisted_32","_hoisted_33","_hoisted_34","_Fragment","_renderList","tags","tag","index","key","style","_normalizeStyle","backgroundColor","color","_hoisted_35","deleteTag","_hoisted_36","_hoisted_37","_hoisted_38","ingredients","_hoisted_39","minlength","instructions","_hoisted_40","_hoisted_41","value"],"sources":["C:\\Users\\willa\\Documents\\GitHub\\ITSC-3155\\TastyTalks\\tastytalks\\src\\views\\CreateRecipe.vue"],"sourcesContent":["<template>\r\n    <main>\r\n      <div class=\"divForm\">\r\n\r\n        <!-- FORM CONTAINER -->\r\n        <div class=\"form-newPost\">\r\n            <div class=\"title-CreateNewPost\">\r\n                <h1>Create new Recipe</h1>\r\n            </div>\r\n\r\n            <!-- FORM -->\r\n\r\n            <!-- The form action goes to /posts because the page should be redirected to the post page with all the posts when the person click submit -->\r\n            <form @submit=\"addPost\" enctype= multipart/form-data method=\"POST\">\r\n\r\n                <!-- Receipe Name  -->\r\n                <label for=\"title\">Recipe Name</label>\r\n                <input type=\"text\" name=\"recipeName\" id=\"recipeName\" placeholder=\"Recipe Name\" v-model=\"recipe_form.title\" required>\r\n\r\n                <!-- Receipe Category -->\r\n                <label for=\"category\">Region</label>\r\n                <select name=\"countryOfOrigin\" id=\"countrySelect\" v-model=\"recipe_form.region\" required>\r\n                    <option value=\"\" selected disabled>Select Region</option>\r\n                    <option value=\"1\">Asia-Pacific</option>\r\n                    <option value=\"2\">Caribbean</option>\r\n                    <option value=\"3\">Central America</option>\r\n                    <option value=\"4\">Central Asia</option>\r\n                    <option value=\"5\">Eastern Europe</option>\r\n                    <option value=\"6\">Middle East</option>\r\n                    <option value=\"7\">Nordic Countries</option>\r\n                    <option value=\"8\">North America</option>\r\n                    <option value=\"9\">Northern Africa</option>\r\n                    <option value=\"10\">Oceania</option>\r\n                    <option value=\"11\">Southern Africa</option>\r\n                    <option value=\"12\">South America</option>\r\n                    <option value=\"13\">Southeast Asia</option>\r\n                    <option value=\"14\">Western Europe</option>\r\n                </select>\r\n\r\n                <!-- Tags Dropdown -->\r\n                <label for=\"tags\">Tags</label>\r\n                <br>\r\n                <br>\r\n\r\n                <div class=\"tag-dropdown\">\r\n                  <button class=\"tag-dropdown-btn\" @click=\"toggleDropdown('course')\">Course</button>\r\n                  <div v-if=\"showDropdown.course\" class=\"tag-dropdown-content\">\r\n                    <a href=\"#\" @click.prevent=\"addTag('Starter')\">Starter</a>\r\n                    <a href=\"#\" @click.prevent=\"addTag('Entrée')\">Entrée</a>\r\n                    <a href=\"#\" @click.prevent=\"addTag('Dessert')\">Dessert</a>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"tag-dropdown\">\r\n                  <button class=\"tag-dropdown-btn\" @click=\"toggleDropdown('region')\">Season</button>\r\n                  <div v-if=\"showDropdown.region\" class=\"tag-dropdown-content\">\r\n                    <a href=\"#\" @click.prevent=\"addTag('Spring')\">Spring</a>\r\n                    <a href=\"#\" @click.prevent=\"addTag('Summer')\">Summer</a>\r\n                    <a href=\"#\" @click.prevent=\"addTag('Fall')\">Fall</a>\r\n                    <a href=\"#\" @click.prevent=\"addTag('Winter')\">Winter</a>\r\n                    <!-- Add more predefined tags for region dropdown -->\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"tag-dropdown\">\r\n                  <button class=\"tag-dropdown-btn\" @click=\"toggleDropdown('specialDiets')\">Special Diets</button>\r\n                  <div v-if=\"showDropdown.specialDiets\" class=\"tag-dropdown-content\">\r\n                    <a href=\"#\" @click.prevent=\"addTag('Vegetarian')\">Vegetarian</a>\r\n                    <a href=\"#\" @click.prevent=\"addTag('Vegan')\">Vegan</a>\r\n                    <a href=\"#\" @click.prevent=\"addTag('Gluten-Free')\">Gluten-Free</a>\r\n                    <!-- Add more predefined tags for special diets dropdown -->\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"tag-dropdown\">\r\n                  <button class=\"tag-dropdown-btn\" @click=\"toggleDropdown('holiday')\">Holiday</button>\r\n                  <div v-if=\"showDropdown.holiday\" class=\"tag-dropdown-content\">\r\n                    <a href=\"#\" @click.prevent=\"addTag('Thanksgiving')\">Thanksgiving</a>\r\n                    <a href=\"#\" @click.prevent=\"addTag('Halloween')\">Halloween</a>\r\n                    <a href=\"#\" @click.prevent=\"addTag('Independence Day')\">Independence Day</a>\r\n                    <a href=\"#\" @click.prevent=\"addTag('Easter')\">Easter</a>\r\n                    <a href=\"#\" @click.prevent=\"addTag('Christmas')\">Christmas</a>\r\n                    <a href=\"#\" @click.prevent=\"addTag('Valentine\\'s Day')\">Valentine's Day</a>\r\n                    <!-- Add more predefined tags for holiday dropdown -->\r\n                  </div>\r\n                </div>\r\n\r\n\r\n                <!-- Selected Tags -->\r\n                <div class=\"tag-container\">\r\n                  <div class=\"tag-list\" id=\"tagList\">\r\n                    <div v-for=\"(tag, index) in tags\" :key=\"index\" class=\"tag\" :style=\"{ backgroundColor: tag.color }\">\r\n                      <div class=\"tag-item\">\r\n                        {{ tag.name }}\r\n                        <span class=\"tag-delete\" @click=\"deleteTag(index)\">×</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n                <!-- This is for inputing tag with a input bar (Could be usefull in the future) -->\r\n                <!-- <div class=\"tag-input\">\r\n                    <input type=\"text\" id=\"tagInput\" placeholder=\"Add a tag\" v-model=\"newTag\">\r\n                    <button type=\"button\" @click.prevent=\"addTag(newTag)\">Add Tag</button>\r\n                </div> -->\r\n\r\n\r\n                <br>\r\n\r\n                <!-- Ingredients -->\r\n                <label for=\"ingredients\">Recipe Ingredients</label>\r\n                <input type=\"text\" name=\"recipeIngredients\" id=\"recipeIngredients\" placeholder=\"Recipe Ingredients\" v-model=\"recipe_form.ingredients\" required>\r\n                \r\n                <!-- Instructions, description and details -->\r\n                <label for=\"details\">Recipe Instructions and Description</label>\r\n                <textarea id=\"text\" name=\"recipeDescription\" type=\"text\" minlength=\"10\" placeholder=\"Recipe Details...\" v-model=\"recipe_form.instructions\" required></textarea>\r\n\r\n\r\n                <!-- Image upload -->\r\n                <label for=\"image\">Recipe Image</label>\r\n                <input \r\n                type=\"file\" \r\n                id=\"imageUpload\"\r\n                accept=\"image/*\"\r\n                required>\r\n\r\n                <!-- <img :src=\"picture.value\" alt=\"preview\">      -->\r\n\r\n                <!-- Submit recipe -->\r\n                <input type=\"submit\" @click=\"addPost\" value=\"Submit\" >\r\n            </form>\r\n\r\n        </div>\r\n      \r\n      \r\n      </div>  \r\n    </main>\r\n</template>\r\n\r\n<script>\r\nimport { addDoc, collection, updateDoc, doc, arrayUnion, getDocs, query, where } from 'firebase/firestore';\r\nimport { db } from '../firebase'\r\nimport { ref } from 'vue'\r\nimport { uploadBytes, getDownloadURL } from 'firebase/storage';\r\nimport { firebaseRef, storage, auth} from '../firebase';\r\n\r\n\r\nexport default {\r\n\r\n  setup() {\r\n\r\n    const recipe_form = ref({\r\n      title: '',\r\n\r\n    });\r\n    const newTag = ref('');\r\n    const showDropdown = ref({\r\n      course: false,\r\n      region: false,\r\n      specialDiets: false,\r\n      holiday: false,\r\n    });\r\n    const tags = ref([]);\r\n\r\n    const addTag = (tag) => {\r\n      if (tag.trim() !== '') {\r\n        tags.value.push({ name: tag });\r\n        newTag.value = '';\r\n      }\r\n    };\r\n\r\n    const deleteTag = (index) => {\r\n      tags.value.splice(index, 1);\r\n    };\r\n\r\n    const toggleDropdown = (category) => {\r\n      // Close all dropdowns\r\n      for (const key in showDropdown.value) {\r\n        showDropdown.value[key] = false;\r\n      }\r\n      // Open the clicked dropdown\r\n      showDropdown.value[category] = true;\r\n    };\r\n\r\n    // Create a recipe post in the database\r\n    const addPost = async (event) => {\r\n\r\n      event.preventDefault();\r\n\r\n      const user = auth.currentUser\r\n\r\n      if(user){\r\n\r\n        const userId = auth.currentUser.uid\r\n\r\n        try{\r\n          //find the user's document with same authId\r\n          const userQuery = query(collection(db, 'users'), where('authId', '==', auth.currentUser.uid));\r\n          const userSnapshot = await getDocs(userQuery);\r\n          const userDoc = userSnapshot.docs[0]\r\n          const userDocId = userDoc.id\r\n\r\n          if (userDoc.exists()) {\r\n            const userData = userDoc.data();\r\n            console.log(\"userData:\", userData);\r\n            \r\n            if(userData && userData.username && userData.region) {\r\n\r\n              const username = userData.username\r\n              const userRegion = userData.region\r\n\r\n              console.log(\"username:\", username);\r\n              console.log(\"userRegion:\", userRegion);\r\n\r\n              const imageInput = document.getElementById(\"imageUpload\");\r\n              const file = imageInput.files[0];\r\n              let imageUrl = '';\r\n\r\n              if (file) {\r\n                try {\r\n                  // Perform the upload\r\n                  const fileRef = firebaseRef(storage, `images/recipePics/${file.name}`);\r\n\r\n                  // Now upload the file\r\n                  const uploadTaskSnapshot = await uploadBytes(fileRef, file);\r\n                  imageUrl = await getDownloadURL(uploadTaskSnapshot.ref);\r\n                } \r\n                \r\n                catch (error) {\r\n                  console.error(\"Error uploading file: \", error);\r\n                  // Handle the error (e.g., display an error message)\r\n                  return;\r\n                }\r\n              }\r\n\r\n              try {\r\n                const recipeRef = await addDoc(collection(db, 'recipes'), {\r\n                  date: Date.now(),\r\n                  ingredients: recipe_form.value.ingredients,\r\n                  instructions: recipe_form.value.instructions,\r\n                  tags: tags.value,\r\n                  title: recipe_form.value.title,\r\n                  regionID: recipe_form.value.region,\r\n                  summary: '',\r\n                  image: imageUrl,\r\n                  user: userId,\r\n                  username: username,\r\n                  userRegion: userRegion,\r\n                  // MISSING SUMMARY DECLARATION: NO INPUT FIELD IN FORM\r\n                  // SEPARATE INSTRUCTIONS AND SUMMARY\r\n                  \r\n                });\r\n                //add the recipeId to the user's created recipes\r\n                await updateDoc(doc(db, 'users', userDocId), {\r\n                  recipes: arrayUnion(recipeRef.id),\r\n                });\r\n\r\n                //redirect\r\n                window.location.href = '/recipefeed';\r\n\r\n              } catch (error) {\r\n                console.error(\"Error adding document: \", error);\r\n                // Handle the error (e.g., display an error message)\r\n              }\r\n            } else{\r\n              console.error(\"Error fetching user data, username, or regionID is undefined\")\r\n            }\r\n          } else {\r\n            console.error(\"User document does not exist\")\r\n          }\r\n        } catch (error) {\r\n          console.error(\"Error fetching user document\", error)\r\n        }\r\n      } else {\r\n      console.log(\"User not authenticated\")\r\n      }\r\n   };\r\n\r\n      return {\r\n        recipe_form,\r\n        newTag,\r\n        showDropdown,\r\n        tags,\r\n        addTag,\r\n        deleteTag,\r\n        toggleDropdown,\r\n        addPost,\r\n      };\r\n    },\r\n    methods:{\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.Create-Container {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    padding-top: 300px;\r\n    padding-bottom: 850px;\r\n    height: 100vh;\r\n}\r\nh1{\r\n    color: white;\r\n    padding-bottom: 10px;\r\n}\r\n\r\nh2{\r\n    color: white;\r\n}\r\n\r\n\r\n/* ///////new Posts Main Section//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// */\r\n\r\n\r\n\r\n\r\n\r\n/* /////// Form ///////////////////// */\r\n\r\n.form-newPost {\r\n    border-radius: 5px;\r\n    padding: 20px;\r\n    background-color: var(--Trying);\r\n    font-family: var(--primaryFont);\r\n    /* Control the width of the Receipe Form container */\r\n    /* max-width: 800px; */\r\n  }\r\n\r\n\r\n.title-CreateNewPost h1{\r\n    text-align: center;\r\n    /* justify-content: center; */\r\n\r\n}\r\n\r\nlabel{\r\n    font-family: var(--primaryFont);\r\n    color: #4c934c;\r\n    font-size: 20px;\r\n    font-weight: bold;\r\n}\r\n\r\ninput[type=text], select, textarea[type=text], input[type=file], input[type=date], input[type=datetime], input[type=datetime-local] {\r\n    width: 100%;\r\n    padding: 12px 20px;\r\n    margin: 15px 0;\r\n    display: inline-block;\r\n    border: 1px solid #ccc;\r\n    border-radius: 4px;\r\n    box-sizing: border-box;\r\n  }\r\n\r\n\r\ninput[type=submit] {\r\n    width: 100%;\r\n    background-color: var(--fourthColor);\r\n    color: white;\r\n    padding: 14px 20px;\r\n    margin: 8px 0;\r\n    border: none;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n  }\r\n\r\ninput[type=submit]:hover {\r\n    background-color: var(--lightFourthColor)\r\n  }\r\n\r\n\r\n\r\n/* Tags Dropdown styles */\r\n.tag-dropdown {\r\n  display: inline-block;\r\n  position: relative;\r\n  padding-right: 10px;\r\n}\r\n\r\n.tag-dropdown-btn {\r\n  background-color: var(--fourthColor);\r\n  color: white;\r\n  padding: 14px 20px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.tag-dropdown-content {\r\n  display: none;\r\n  position: absolute;\r\n  background-color: #f9f9f9;\r\n  min-width: 160px;\r\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\r\n  z-index: 1;\r\n}\r\n\r\n.tag-dropdown-content a {\r\n  color: black;\r\n  padding: 12px 16px;\r\n  text-decoration: none;\r\n  display: block;\r\n}\r\n\r\n\r\n.tag-dropdown:hover .tag-dropdown-content {\r\n  display: block;\r\n}\r\n\r\n.tag-container {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 8px;\r\n}\r\n\r\n.tag {\r\n  margin: 4px;\r\n  border-radius: 4px;\r\n  padding: 8px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.tag-item {\r\n  margin-right: 8px;\r\n}\r\n\r\n.tag-delete {\r\n  cursor: pointer;\r\n  font-weight: bold;\r\n  color: white;\r\n  background-color: #ff4d4d;\r\n  padding: 4px;\r\n  border-radius: 50%;\r\n}\r\n\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}